<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lung-cancer – Markuss Saule</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-0774fc528949661fb60d8774007a227f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Markuss Saule</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/markuss-saule/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/msaule"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lung Cancer Survival (SEER 2004-2015) (R + Power BI)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/projects/lung-cancer/cover.png" class="cover-image img-fluid figure-img"></p>
<figcaption>Project cover</figcaption>
</figure>
</div>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Analyzed 114K SEER lung cancer cases (2004-2015) to identify the strongest predictors of 2-year survival. Built a full R workflow with data cleaning, statistical tests, and logistic regression, then visualized results in Power BI. Found stage at diagnosis increases survival odds by 8x, with tumor size, lymph node spread, sex, and race as secondary predictors. Clear, clinical-quality survival analysis with interpretable insights.</p>
</section>
<section id="what-i-did" class="level2">
<h2 class="anchored" data-anchor-id="what-i-did">What I Did</h2>
<ul>
<li>Defined the business objective, metric targets, and analysis scope.</li>
<li>Built and validated the data, modeling, and reporting workflow.</li>
<li>Packaged outputs for stakeholder interpretation and decision support.</li>
</ul>
</section>
<section id="resultsimpact" class="level2">
<h2 class="anchored" data-anchor-id="resultsimpact">Results/Impact</h2>
<p>Delivered an analysis workflow with decision-ready outputs and reusable artifacts.</p>
</section>
<section id="tech-stack" class="level2">
<h2 class="anchored" data-anchor-id="tech-stack">Tech Stack</h2>
<ul>
<li>Data Analysis, Problem Solving, Programming, Project Management</li>
</ul>
</section>
<section id="deliverables" class="level2">
<h2 class="anchored" data-anchor-id="deliverables">Deliverables</h2>
<ul>
<li><a href="../files/lung-cancer/Cancer-Project 1.pdf">Cancer-Project 1.pdf</a></li>
<li><a href="../files/lung-cancer/Cancer-Project.pdf">Cancer-Project.pdf</a></li>
<li><a href="../files/lung-cancer/cancerbi.pbix">cancerbi.pbix</a></li>
<li><a href="../files/lung-cancer/cancerbi.pdf">cancerbi.pdf</a></li>
<li><a href="../files/lung-cancer/Cancer_Project.rmd">Cancer_Project.rmd</a></li>
<li><a href="../files/lung-cancer/logistic_regression_results.csv">logistic_regression_results.csv</a></li>
<li><a href="../files/lung-cancer/powerbi-dashboard-snapshot.pdf">powerbi-dashboard-snapshot.pdf</a></li>
</ul>
</section>
<section id="project-notes" class="level2">
<h2 class="anchored" data-anchor-id="project-notes">Project Notes</h2>
<p>Description: Analyzed 114K SEER lung cancer cases (2004-2015) to identify the strongest predictors of 2-year survival. Built a full R workflow with data cleaning, statistical tests, and logistic regression, then visualized results in Power BI. Found stage at diagnosis increases survival odds by 8x, with tumor size, lymph node spread, sex, and race as secondary predictors. Clear, clinical-quality survival analysis with interpretable insights. Skills Demonstrated: Data Analysis, Problem Solving, Programming, Project Management Project Status: Completed Completion Date: October 7, 2025</p>
</section>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary"><strong>Executive Summary</strong></h2>
<p>This project came from something personal. After losing my dad to cancer, I-ve wanted to understand what shapes survival and what doesn-t. I chose to focus on lung cancer because it-s one of the hardest and most common forms to survive.</p>
<p>I used data from the <strong>SEER cancer registry (2004-2015)</strong> and built a full analysis in <strong>R</strong> and <strong>Power BI</strong>. My goal was to find what really predicts survival in the data, not just what people assume.</p>
<p>Here-s what stood out:</p>
<ul>
<li>The stage of diagnosis changes everything. Patients caught early were <strong>eight times more likely</strong> to survive two years.</li>
<li>Tumor size and the number of affected lymph nodes both reduced survival odds.</li>
<li>Men had slightly lower odds of survival than women.</li>
<li>People identified as Asian, Pacific Islander, or American Indian tended to do better than White patients, but those gaps were smaller than I expected.</li>
</ul>
<p>Across the dataset, there were over <strong>114,000 cases</strong>, and about <strong>25% of patients</strong> survived two years.</p>
<p>Working on this reminded me that behind every line of data is a person and a story. It made the statistics feel real.</p>
<hr>
</section>
<section id="data-tools" class="level2">
<h2 class="anchored" data-anchor-id="data-tools"><strong>Data &amp; Tools</strong></h2>
<ul>
<li><strong>Dataset:</strong> SEER 2004-2015 (Lung &amp; Bronchus cancer)</li>
<li><strong>Cases:</strong> 114,000 total</li>
<li><strong>Main metric:</strong> 2-year survival</li>
<li><strong>Tools used:</strong> R (R Markdown) and Power BI</li>
<li><strong>Exports:</strong> Cleaned data and model outputs for visualization</li>
</ul>
<hr>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods"><strong>Methods</strong></h2>
<p>I started by filtering the SEER dataset to keep only lung and bronchus cancers diagnosed from 2004 to 2015. I kept the first primary cancers only, since many patients had multiple diagnoses.</p>
<p>Then I converted survival months into numbers and created binary outcomes:</p>
<ul>
<li>Survived at least 2 years</li>
<li>Survived at least 5 years (for reference)</li>
</ul>
<p>After cleaning, I ran several tests to explore the data:</p>
<ul>
<li><strong>Chi-square tests</strong> for categorical variables like stage, sex, and race</li>
<li><strong>t-tests and ANOVA</strong> for tumor size</li>
<li>A <strong>logistic regression model</strong> to see which factors best predicted survival</li>
</ul>
<p>Here-s what the analysis showed:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Test</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Stage vs survival</td>
<td>χ = 24,261, p &lt; 0.001</td>
</tr>
<tr class="even">
<td>Sex vs survival</td>
<td>χ = 847, p &lt; 0.001</td>
</tr>
<tr class="odd">
<td>Race vs survival</td>
<td>χ = 169, p &lt; 0.001</td>
</tr>
</tbody>
</table>
<p>Average tumor size was 61 mm in those who didn-t survive two years and 58 mm in those who did. The difference seems small but was still statistically significant (p = 0.014).</p>
<p>The logistic regression made the relationships clearer:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Predictor</th>
<th>Odds Ratio</th>
<th>95% CI</th>
<th>p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Localized stage</td>
<td>8.13</td>
<td>(7.76, 8.52)</td>
<td>&lt; 0.001</td>
</tr>
<tr class="even">
<td>Regional stage</td>
<td>3.20</td>
<td>(3.07, 3.34)</td>
<td>&lt; 0.001</td>
</tr>
<tr class="odd">
<td>Male</td>
<td>0.64</td>
<td>(0.62, 0.67)</td>
<td>&lt; 0.001</td>
</tr>
<tr class="even">
<td>Race: Other (AI/AN, A/PI)</td>
<td>1.52</td>
<td>(1.40, 1.64)</td>
<td>&lt; 0.001</td>
</tr>
<tr class="odd">
<td>Tumor size</td>
<td>1.00 (per mm)</td>
<td></td>
<td>&lt; 0.001</td>
</tr>
<tr class="even">
<td>Positive nodes</td>
<td>0.98 (per node)</td>
<td></td>
<td>&lt; 0.001</td>
</tr>
</tbody>
</table>
<p>The results were clear. The earlier the cancer is caught, the better the chance of survival.</p>
<hr>
</section>
<section id="r-analysis" class="level2">
<h2 class="anchored" data-anchor-id="r-analysis"><strong>R Analysis</strong></h2>
<p>I used R to handle all the cleaning, statistics, and modeling before moving anything to Power BI.</p>
<p>The first step was to take the raw SEER export and make sense of it. That meant renaming the long variable names, filtering to lung and bronchus cancers, and converting survival months into actual numbers.</p>
<p>After cleaning, I defined two survival outcomes:</p>
<ul>
<li><strong>Two-year survival</strong> (main metric)</li>
<li><strong>Five-year survival</strong> (for comparison)</li>
</ul>
<p>Then I ran several basic tests to see what mattered most.</p>
<ul>
<li><strong>Chi-square tests</strong> showed clear differences by stage, sex, and race.</li>
<li><strong>t-tests and ANOVA</strong> helped check tumor size across groups.</li>
<li>Finally, a <strong>logistic regression</strong> model tied everything together by predicting who survived two years based on stage, tumor size, lymph nodes, sex, and race.</li>
</ul>
<p>Each test confirmed what doctors often see in practice.</p>
<p>Stage at diagnosis was the biggest factor, followed by tumor size and how far the cancer had spread through lymph nodes.</p>
<p>Once the analysis was complete, I exported the cleaned data and model results as CSVs for visualization in Power BI.</p>
<section id="r-code-samples" class="level3">
<h3 class="anchored" data-anchor-id="r-code-samples">R Code Samples</h3>
<ul>
<li><p><strong>R Code for Lung Cancer Survival Analysis</strong></p>
<p>Data Cleaning &amp; Setup</p>
<p>``` r # Load libraries library(tidyverse) library(broom) library(knitr) library(kableExtra)</p>
<p># Import SEER dataset seer_raw &lt;- read.csv(“cancer_data.csv”)</p>
<p># Rename key columns for easier reference seer &lt;- seer_raw %&gt;% rename( age_grp = <code>Age.recode.with..1.year.olds.and.90.</code>, sex = <code>Sex</code>, race = <code>Race.recode..White..Black..Other.</code>, site_code = <code>Primary.Site</code>, stage_sum = <code>Summary.stage.2000..1998.2017.</code>, dx_year = <code>Year.of.diagnosis</code>, surv_months = <code>Survival.months</code>, tumor_size = <code>CS.tumor.size..2004.2015.</code>, nodes_pos = <code>Regional.nodes.positive..1988..</code> ) %&gt;% filter(site_code &gt;= 340 &amp; site_code &lt;= 349, dx_year &gt;= 2004 &amp; dx_year &lt;= 2015, seq_num == “One primary only”) ```</p>
<p>Survival Outcome Creation</p>
<p><code>r # Convert survival months and create 2- &amp; 5-year outcomes   seer &lt;- seer %&gt;%     mutate(       surv_months = as.numeric(surv_months),       survived_24m = ifelse(surv_months &gt;= 24, 1, 0),       survived_5yr = ifelse(surv_months &gt;= 60, 1, 0)     )</code></p>
<p>Statistical Tests</p>
<p>``` r # Chi-square tests chisq.test(table(seer<span class="math inline">\(stage_sum, seer\)</span>survived_24m)) chisq.test(table(seer<span class="math inline">\(sex, seer\)</span>survived_24m)) chisq.test(table(seer<span class="math inline">\(race, seer\)</span>survived_24m))</p>
<p># t-test &amp; ANOVA seer<span class="math inline">\(tumor_size &lt;- as.numeric(seer\)</span>tumor_size) t.test(tumor_size ~ survived_24m, data = seer) aov(tumor_size ~ stage_sum, data = seer) %&gt;% summary() ```</p>
<p>Logistic Regression Model</p>
<p>``` r # Logistic regression for 2-year survival glm_fit &lt;- glm( survived_24m ~ stage_sum + sex + race + tumor_size + nodes_pos, data = seer, family = binomial() )</p>
<p># View odds ratios glm_results &lt;- tidy(glm_fit, exponentiate = TRUE, conf.int = TRUE) glm_results %&gt;% select(term, estimate, conf.low, conf.high, p.value) %&gt;% rename( Predictor = term, <code>Odds Ratio</code> = estimate, <code>Lower 95% CI</code> = conf.low, <code>Upper 95% CI</code> = conf.high, <code>p-value</code> = p.value ) ```</p>
<p>Export for Power BI</p>
<p>``` r # Export cleaned data and model results write.csv(seer, “seer_lung_clean.csv”, row.names = FALSE)</p>
<p>glm_results %&gt;% select(term, estimate, conf.low, conf.high, p.value) %&gt;% rename( Predictor = term, Odds_Ratio = estimate, Lower_95_CI = conf.low, Upper_95_CI = conf.high, P_value = p.value ) %&gt;% write.csv(“logistic_regression_results.csv”, row.names = FALSE) ```</p></li>
</ul>
<p>[Cancer-Project.pdf](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/Cancer-Project.pdf)</p>
<hr>
</section>
</section>
<section id="power-bi-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="power-bi-dashboard"><strong>Power BI Dashboard</strong></h2>
<p>Once I had the cleaned data, I built a two-page dashboard in Power BI to make the patterns easier to see.</p>
<p><strong>Page 1 - Overview</strong></p>
<ul>
<li>2-year survival by stage, sex, and race</li>
<li>Average tumor size and survival rates</li>
<li>Filters for year, stage, sex, and race</li>
</ul>
<p>[cancerbi.pdf](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/cancerbi.pdf)</p>
<hr>
</section>
<section id="key-insights" class="level2">
<h2 class="anchored" data-anchor-id="key-insights"><strong>Key Insights</strong></h2>
<ol type="1">
<li><strong>Stage decides everything.</strong> Localized cancers survive at a much higher rate than distant ones.</li>
<li><strong>Tumor size and node spread matter.</strong> Larger tumors and higher node counts lower survival odds.</li>
<li><strong>Gender plays a small role.</strong> Men have lower odds of survival, even after adjusting for other factors.</li>
<li><strong>Race differences exist but are modest.</strong> Clinical factors dominate.</li>
<li><strong>Early detection saves lives.</strong> The data makes it impossible to ignore.</li>
</ol>
<hr>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection"><strong>Reflection</strong></h2>
<p>This project was different from the others I-ve done. It wasn-t about building models or dashboards for their own sake. It was about trying to understand something that has personally affected my life.</p>
<p>Looking through this data, I couldn-t help but think about my dad and about how much difference early screening could have made. These records may look like numbers, but they carry real stories and pain behind them.</p>
<p>This is what drives me to keep working in data and healthcare. The analytics matter because they can help real people.</p>
<hr>
</section>
<section id="downloads" class="level2">
<h2 class="anchored" data-anchor-id="downloads"><strong>Downloads</strong></h2>
<p>[logistic_regression_results.csv](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/logistic_regression_results.csv)</p>
<p>[cancerbi.pbix](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/cancerbi.pbix)</p>
<p>[Cancer-Project.pdf](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/Cancer-Project%201.pdf)</p>
<p>[Cancer Project.Rmd](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/Cancer_Project.rmd)</p>
<p>[powerbi-dashboard-snapshot.pdf](Lung%20Cancer%20Survival%20(SEER%202004%E2%80%932015)%20(R%20%C2%B7%20Power%20B/powerbi-dashboard-snapshot.pdf)</p>
<hr>
</section>
<section id="disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="disclaimer"><strong>Disclaimer</strong></h2>
<p>This analysis is based on publicly available SEER data from 2004 to 2015. It-s for educational purposes only and not intended as medical advice.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/msaule\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>